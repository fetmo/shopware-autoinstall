// {namespace name=backend/viison_pickware_erp_article_supplier_assignment/main}
Ext.define("Shopware.apps.ViisonPickwareERPArticleSupplierAssignment.view.detail.SupplierAssignment",{ extend:"Shopware.apps.ViisonPickwareERPSupplierCommon.view.AssignmentPanel",alias:"widget.viison_pickware_erp_article_supplier_assignment-detail-supplier_assignment",leftTitle:'{s name=assignment/left_title}{/s}',rightTitle:'{s name=assignment/right_title}{/s}',border:false,bodyStyle:{ borderWidth:0},initComponent:function(){ this.dockedItems=[{ xtype:"toolbar",dock:"top",ui:"shopware-ui",padding:7,border:false,items:[Ext.create("Shopware.apps.ViisonCommonVariantComboBox.view.ComboBox",{ name:"variantSelection"}),"->",{ text:'{s name=assignment/toolbar/copy_assignments_button}{/s}',cls:"primary small",action:"copyAssignmentToAllVariants",disabled:true,handler:function(){ this.fireEvent("copyAssignmentToAllVariants",this)},scope:this}]}];this.callParent(arguments)},createLeftColumns:function(){ return this.createSupplierColumns()},getRightPanelConfig:function(){ var i=this.callParent(arguments);i.plugins=i.plugins||[];i.plugins.push(Ext.create("Ext.grid.plugin.RowEditing",{ clicksToMoveEditor:1,autoCancel:false,listeners:{ edit:function(i,e){ e.record.set("defaultSupplier",e.newValues.defaultSupplier);e.record.set("purchasePrice",e.newValues.purchasePrice);e.record.commit();this.fireEvent("supplierRowEdited",this,e.record)},scope:this}}));i.dockedItems=i.dockedItems||[];i.dockedItems.splice(0,0,this.createPagingToolbar(this.rightStore));return i},createRightColumns:function(){ var i=this.createSupplierColumns();i.push({ xtype:"gridcolumn",header:'{s name=supplier/field/supplierArticleNumber}{/s}',dataIndex:"supplierArticleNumber",flex:1,editor:{ xtype:"textfield"}},{ xtype:"gridcolumn",header:ViisonPickwarePurchasePriceHelper.purchasePriceLabel('{s name=assignment/column/purchase_price}{/s}'),dataIndex:"purchasePrice",width:75,align:"right",editor:{ xtype:"numberfield",allowBlank:true,minValue:0,step:.01},renderer:ViisonCurrencyFormatter.renderer},{ xtype:"gridcolumn",header:'{s name=assignment/column/order_amount}{/s}',dataIndex:"orderAmount",width:75,align:"right",editor:{ xtype:"numberfield",allowBlank:true,minValue:0,step:1}},{ xtype:"gridcolumn",header:'{s name=assignment/column/default_supplier}{/s}',dataIndex:"defaultSupplier",width:75,tdCls:"x-action-col-cell",editor:{ xtype:"checkbox"},renderer:function(i,e){ e.tdAttr='data-qtip="{s name=assignment/column/default_supplier}{/s}"';return i?'<img alt="" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="x-action-col-icon x-action-col-0 sprite-ui-check-box">':""}});return i},createSupplierColumns:function(){ return[{ xtype:"gridcolumn",header:'{s name=supplier/field/name}{/s}',dataIndex:"name",flex:1},{ xtype:"gridcolumn",header:'{s name=supplier/field/contact}{/s}',dataIndex:"contact",flex:1},{ xtype:"gridcolumn",header:'{s name=supplier/field/email}{/s}',dataIndex:"email",flex:1},{ xtype:"gridcolumn",header:'{s name=supplier/field/phone}{/s}',dataIndex:"phone",flex:1}]}});
