Ext.define("Shopware.apps.ViisonCommonComboBox.view.ComboBox",{ extend:"Ext.form.field.ComboBox",alias:"widget.viison_common_combo_box-combo_box",width:300,queryMode:"local",valueField:"id",allowBlank:false,editable:false,autoSelect:true,forceSelection:true,submitEmptyText:false,changeEventName:"comboBoxValueChanged",initComponent:function(){ this.editable=this.allowBlank;this.autoSelect=!this.allowBlank;this.forceSelection=!this.allowBlank;this.on("change",function(e,t,i){ if(t===null){ this.fireEvent(this.changeEventName,null,e)}else if(t!==i){ var l=this.findRecord(this.valueField,t);if(l){ this.fireEvent(this.changeEventName,l,e)}}},this);this.store.on("clear",this.updateSelectedValue,this);this.store.on("refresh",this.updateSelectedValue,this);this.callParent(arguments)},reset:function(){ this.callParent();if(!this.allowBlank){ this.updateSelectedValue(this.store)}},getSelectedRecord:function(){ return this.findRecord(this.valueField,this.getValue())},updateSelectedValue:function(e){ if(this.allowBlank){ var t=this.getValue();this.setValue(null);this.fireEvent("change",this,null,t)}else if(this.initialValue&&e.findExact(this.valueField,this.initialValue)>=0){ this.setValue(this.initialValue);delete this.initialValue}else{ var i=e.count()>0?e.first().get(this.valueField):0;this.setValue(i)}}});
