Ext.define("Shopware.apps.ViisonCommonAnalytics.controller.ModuleWithFilter",{ extend:"Shopware.apps.ViisonCommonAnalytics.controller.AnalysisModuleHandler",constructor:function(t){ this.setFilterModules(t.filterModules);this.callParent(arguments)},setFilterModules:function(t){ this.filterModules=t||{ };this.toolbarComponents=null;this.valueRetrievers=null},initializeFilterModules:function(){ var t={ };var e={ };Ext.Object.each(this.filterModules,function(o,i){ var n=i.factoryClass;var r=i.factoryConfig;var l=Ext.applyIf({ },r);var a=Ext.create(n,l);var s=a.getToolbarFilterConfig();t[o]=s;e[o]=a.getToolbarComponentValueRetriever()});this.toolbarComponents=t;this.valueRetrievers=e},getToolbarComponents:function(){ if(this.toolbarComponents===null){ this.initializeFilterModules()}return this.toolbarComponents},getValueRetriever:function(t){ if(this.valueRetrievers===null){ this.initializeFilterModules()}return this.valueRetrievers[t]},onLeaveAnalysis:function(t,e,o,i,n){ if(n===null){ var r=t.viisonCommonAnalyticsGetToolbar();var l=t.viisonCommonAnalyticsOnToolbarRefreshed.bind(t);r.viisonCommonAnalyticsRestoreToolbarComponents(l)}return this.callParent(arguments)},onBeforeRenderDataOutput:function(t){ var e=t.viisonCommonAnalyticsGetToolbar();var o=t.viisonCommonAnalyticsOnToolbarRefreshed.bind(t);e.viisonCommonAnalyticsSetToolbarComponents(this.getToolbarComponents(),o);return this.callParent(arguments)},onBuildRequestParamMap:function(t,e,o){ var i=t.viisonCommonAnalyticsGetToolbar();Ext.Object.each(this.filterModules,function(t){ var e=this.getValueRetriever(t);o[t]=e(i)},this);return this.callParent(arguments)}});
