// {namespace name=backend/viison_pickware_erp_supplier_orders/main}
Ext.define("Shopware.apps.ViisonPickwareERPSupplierOrders.view.edit.Attachments",{ extend:"Ext.container.Container",alias:"widget.viison_pickware_erp_supplier_orders-edit-attachments",title:'{s name=edit/attachments/title}{/s}',layout:"border",uploadUrl:'{url controller=mediaManager action=upload}?albumID={$viisonSupplierOrderAttachmentsAlbumId}',initComponent:function(){ this.items=[this.createAttachmentsPanel(),this.createUploadPanel()];this.callParent(arguments)},createAttachmentsPanel:function(){ return{ xtype:"grid",region:"center",store:this.record.attachments(),flex:3,columns:[{ header:'{s name=order/attachment/field/filename}{/s}',dataIndex:"filename",flex:1},{ xtype:"datecolumn",header:'{s name=order/attachment/field/date}{/s}',dataIndex:"date",width:130,format:"d.m.Y H:i:s"},{ xtype:"actioncolumn",width:50,items:[{ iconCls:"sprite-inbox-download",action:"downloadAttachment",tooltip:'{s name=edit/attachments/tooltip/download}{/s}',handler:function(i,e){ this.fireEvent("downloadAttachment",i.getStore().getAt(e))},scope:this},{ iconCls:"sprite-minus-circle",action:"deleteAttachment",tooltip:'{s name=edit/attachments/tooltip/delete}{/s}',handler:function(i,e){ this.fireEvent("deleteAttachment",this,i.getStore().getAt(e))},scope:this}]}]}},createUploadPanel:function(){ return{ xtype:"form",region:"east",title:'{s name=edit/attachments/upload/title}{/s}',flex:1,bodyPadding:10,items:[{ xtype:"filefield",fieldLabel:'{s name=edit/attachments/upload/field_label}{/s}',buttonText:'{s name=edit/attachments/upload/button}{/s}',buttonOnly:false,margin:"0 0 10",anchor:"100%",labelWidth:60,buttonConfig:{ iconCls:"sprite-inbox-upload",cls:"small secondary"},listeners:{ afterrender:function(i){ i.fileInputEl.dom.multiple=true},change:function(i){ this.fireEvent("uploadAttachment",i)},scope:this}},{ xtype:"html5fileupload",name:"drop-zone",requestURL:this.uploadUrl,showInput:false,checkSize:false,checkType:false,checkAmount:false,enablePreviewImage:false,dropZoneText:'{s name=edit/attachments/upload/description}{/s}',padding:0,listeners:{ fileUploaded:{ fn:function(i){ this.fireEvent("attachmentUploaded",this,i)},scope:this}}}]}}});
