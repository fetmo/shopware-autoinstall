// {namespace name=backend/viison_pickware_erp_stock_overview/main}
Ext.define("Shopware.apps.ViisonPickwareERPStockOverview.view.PlanningInterval",{ extend:"Ext.container.Container",alias:"widget.viison_pickware_erp_stock_overview-planning_interval",style:{ backgroundColor:"#f0f2f4",borderBottom:"1px solid #A4B5C0 !important"},layout:"vbox",padding:6,height:55,border:false,daysSelectionStore:Ext.create("Ext.data.Store",{ fields:["value","title"],data:[{ value:7,title:1+' {s name=label/planning/time/week}{/s}'},{ value:2*7,title:2+' {s name=label/planning/time/weeks}{/s}'},{ value:3*7,title:3+' {s name=label/planning/time/weeks}{/s}'},{ value:30,title:1+' {s name=label/planning/time/month}{/s} ('+30+' {s name=label/planning/time/days}{/s})'}].concat(Ext.Array.map([2,3,4,5,6,7,8,9,10,11,12],function(i){ return{ value:i*30,title:i+' {s name=label/planning/time/months}{/s} ('+i*30+' {s name=label/planning/time/days}{/s})'}}))}),initComponent:function(){ this.items=[{ xtype:"form",border:false,layout:"hbox",padding:"6 10 0 10",items:[{ xtype:"label",baseCls:"x-form-item-label",style:"font-size:120%;opacity:0.5;font-weight:normal;",html:'{s name=label/planning/title}{/s}',margin:"3 0 0 0"},{ xtype:"datefield",itemId:"fromDate",margin:"0 0 0 18",fieldLabel:'{s name=label/planning/from}{/s}',labelWidth:"auto",labelStyle:"margin-right:10px;padding-top:4px;",value:this.store.getProxy().extraParams.planningFrom,listeners:{ change:function(){ this.down("#toDate").setValue(this.calculateToDate())},scope:this}},{ xtype:"combobox",itemId:"intervalInDays",margin:"0 0 0 15",fieldLabel:'{s name=label/planning/interval}{/s}',labelWidth:"auto",labelStyle:"margin-right:10px;padding-top:4px;",store:this.daysSelectionStore,queryMode:"local",displayField:"title",valueField:"value",value:this.daysSelectionStore.getAt(3).get("value"),forceSelection:true,listeners:{ change:function(){ this.down("#toDate").setValue(this.calculateToDate())},scope:this}},{ xtype:"datefield",itemId:"toDate",cls:"viison-common--datefield",margin:"0 0 0 15",fieldLabel:'{s name=label/planning/to}{/s}',labelWidth:"auto",labelStyle:"margin-right:10px;padding-top:5px;",disabled:true,disabledCls:"is--disabled",value:this.store.getProxy().extraParams.planningFrom},{ xtype:"button",text:'{s name=label/planning/confirm}{/s}',cls:"primary",margin:"1 0 0 20",padding:"1 10 1 10",handler:function(){ this.fireEvent("planningRange",{ from:this.down("#fromDate").getValue(),to:this.calculateToDate()})},scope:this}]}];this.callParent(arguments)},calculateToDate:function(){ var i=this.down("#fromDate").getValue();var e=this.down("#intervalInDays").getValue();return Ext.Date.add(i,Ext.Date.DAY,e)}});
